{% extends 'generic/object_detail.html' %}
{% load helpers %}

{% load render_table from django_tables2 %}

{% block extra_breadcrumbs %}
    <li>Dolt</li>
    <li><a href="{% url 'plugins:nautobot_version_control:branch_list' %}">Branches</a></li>
    <li>{{ object }}</li>
{% endblock %}

{% block extra_buttons %}
    <a href="{% url 'plugins:nautobot_version_control:branch_checkout' pk=object.name %}" class="btn btn-primary"
       title="activate">
        Activate
    </a>
{% endblock %}

{% block content_left_page %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>Branch</strong>
        </div>
        <table class="table table-hover panel-body attr-table">
            <tr>
                <td>Name</td>
                <td>{{ object.name|placeholder }}</td>
            </tr>
            <tr>
                <td>Created By</td>
                <td>{{ object.created_by|placeholder }}</td>
            </tr>
            <tr>
                <td>Created At</td>
                <td>{{ object.created_at|placeholder }}</td>
            </tr>
            <tr>
                <td>Starting Branch</td>
                <td>{{ object.source_branch|placeholder }}</td>
            </tr>
            <tr>
                <td>Commit Hash</td>
                <td>{{ object.hash|placeholder }}</td>
            </tr>
            <tr>
                <td>Latest Committer</td>
                <td>{{ object.latest_committer|placeholder }}</td>
            </tr>
            <tr>
                <td>Latest Committer Email</td>
                <td>{{ object.latest_committer_email|placeholder }}</td>
            </tr>
            <tr>
                <td>Latest Commit Date</td>
                <td>{{ object.latest_commit_date|placeholder }}</td>
            </tr>
            <tr>
                <td>Latest Commit Message</td>
                <td>{{ object.latest_commit_message|placeholder }}</td>
            </tr>
        </table>
    </div>
{% endblock %}

{% block content_right_page %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>Diff Summary</strong>
        </div>
        <div class="list-group">
            {% for obj_type in results %}
            <a href="#{{ obj_type.name|lower }}" class="row list-group-item">
                <div class="col-md-6 align-middle">{{ obj_type.name }}</div>
                <div class="col-md-6 text-right">
                    <span class="label label-success">{{ obj_type.added }}</span>
                    <span class="label label-warning">{{ obj_type.modified }}</span>
                    <span class="label label-danger">{{ obj_type.removed }}</span>
                    <span class="badge">{{ obj_type.table.page.paginator.count }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block content_full_width_page %}
{% include 'nautobot_version_control/diffs.html' with results=results %}
{% endblock %}