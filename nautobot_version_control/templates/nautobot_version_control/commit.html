{% extends 'generic/object_detail.html' %}
{% load render_table from django_tables2 %}

{% block extra_breadcrumbs %}
    <li>Dolt</li>
    <li><a href="{% url 'plugins:nautobot_version_control:commit_list' %}">Commits</a></li>
    <li>{{ object.short_message }}</li>
{% endblock %}

{% block title %}{{ object.short_message }}{% endblock %}

{% block content_left_page %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>Commit</strong>
        </div>
        <table class="table table-hover panel-body attr-table">
            <tr>
                <td>Commit Hash</td>
                <td>{{ object.commit_hash|placeholder }}</td>
            </tr>
            <tr>
                <td>Committer</td>
                <td>{{ object.committer|placeholder }}</td>
            </tr>
            <tr>
                <td>Commiter Email</td>
                <td>{{ object.email|placeholder }}</td>
            </tr>
            <tr>
                <td>Date</td>
                <td>{{ object.date|placeholder }}</td>
            </tr>
            <tr>
                <td>Message</td>
                <td>{{ object.message|placeholder }}</td>
            </tr>
        </table>
    </div>
{% endblock %}

{% block content_right_page %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>Diff Summary</strong>
        </div>
        <div class="list-group">
            {% for obj_type in results %}
            <a href="#{{ obj_type.name|lower }}" class="row list-group-item">
                <div class="col-md-6 align-middle">{{ obj_type.name }}</div>
                <div class="col-md-6 text-right">
                    <span class="label label-success">{{ obj_type.added }}</span>
                    <span class="label label-warning">{{ obj_type.modified }}</span>
                    <span class="label label-danger">{{ obj_type.removed }}</span>
                    <span class="badge">{{ obj_type.table.page.paginator.count }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block content_full_width_page %}
{% include 'nautobot_version_control/diffs.html' with results=results %}
{% endblock %}
